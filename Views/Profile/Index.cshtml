@model MaksGym.Models.ViewModels.ProfileViewModel
@{
    ViewData["Title"] = "Дашборд";
}

<div class="container my-4">
    <div class="row g-3">
        <div class="col-12">
            <div class="card shadow-sm text-center p-3">
                <h2 class="fw-bold mb-0">Твої напрямки</h2>
                <ul class="list-inline mt-2">
                    @if (Model.groups != null)
                    {
                        @foreach (var group in Model.groups)
                        {
                            <li class="list-inline-item badge bg-primary fs-6">
                                @(group.Direction?.DirectionName ?? "-")
                            </li>
                        }
                    }
                </ul>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card shadow-sm p-3 text-center">
                <h5 class="fw-bold text-muted">Ім'я користувача</h5>
                <p class="fs-5 mb-0">@Model.UserName</p>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card shadow-sm p-3 text-center">
                <h5 class="fw-bold text-muted">Мої групи</h5>
                <ul class="list-group list-group-flush">
                    @if (Model.groups != null)
                    {
                        @foreach (var group in Model.groups)
                        {
                            <li class="list-group-item">@group.GroupName</li>
                        }
                    }
                </ul>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card shadow-sm p-4 text-center" style="min-height: 300px; background: linear-gradient(#eef7fd, #eef7fd 55%, #dfe7c6 55%, #dfe7c6);">
                @if (string.IsNullOrEmpty(Model.PhotoUrl))
                {
                    <img src="https://cdn-icons-png.flaticon.com/512/10/10938.png" class="img-fluid" />
                }
                else
                {
                    <img src="@Model.PhotoUrl" class="img-fluid" />
                }
            </div>
        </div>

        <div class="col-md-3">
            <div class="card shadow-sm p-4 text-center">
                <h5 class="fw-bold text-muted">Мої абонементи</h5>
                <ul class="list-group list-group-flush">
                    @if (Model.subscriptions != null)
                    {
                        @foreach (var subscription in Model.subscriptions)
                        {
                            <li class="list-group-item">@subscription.Name</li>
                        }
                    }
                </ul>

            </div>
        </div>

        <div class="col-md-3">
            <div class="card shadow-sm p-4 text-center">
                <span class="fs-5 fw-bold">ТЕРМІН ДІЇ ДО</span>
                <ul class="list-group list-group-flush">
                    @if (Model.subscriptions != null)
                    {
                        @foreach(var studenToSubscription in Model.studentsToSubscriptions)
                        {
                            if(studenToSubscription.IsFrozen)
                            {
                                <li class="list-group-item text-warning">Заморожено</li>
                            }
                            else  if (studenToSubscription.EndDate >= DateTime.Now)
                            {
                                <li class="list-group-item">@studenToSubscription.EndDate</li>

                            }

                            else if (studenToSubscription.EndDate < DateTime.Now){
                                <li class="list-group-item text-success">Неаактвиний з @studenToSubscription.EndDate</li>
                            }
                            
                            }
                        
                    }
                </ul>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card shadow-sm p-4 text-center">
                <h5 class="fw-bold text-muted">КОРИСНІ ПОСИЛАННЯ</h5>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card shadow-sm p-4 text-center">
                <h5 class="fw-bold">НОВИНИ</h5>
            </div>
        </div>
    </div>

    <div class="mt-5">
        <h3 class="fw-bold text-center mb-3">Твій графік занять</h3>
        <div class="table-responsive">
            <table class="table table-striped table-bordered align-middle shadow-sm">
                <thead class="table-dark text-center">
                    <tr>
                        <th>Група</th>
                        <th>День</th>
                        <th>Час</th>
                        <th>Напрямок</th>
                        <th>Тренер</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.groups != null)
                    {
                        @foreach (var group in Model.groups)
                        {
                            <tr>
                                <td class="text-center">@group.GroupName</td>
                                <td>
                                    @if (group.Shedules != null)
                                    {
                                        @foreach (var shedule in group.Shedules)
                                        {
                                            <div>@shedule.DayOfWeek</div>
                                        }
                                    }
                                </td>
                                <td>
                                    @if (group.Shedules != null)
                                    {
                                        @foreach (var shedule in group.Shedules)
                                        {
                                            <div>@shedule.StartTime - @shedule.EndTime</div>
                                        }
                                    }
                                </td>
                                <td class="text-center">
                                    @(group.Direction != null
                                        ? group.Direction.DirectionName
                                        : "-")
                                </td>
                                <td class="text-center">
                                    @(group.Coach?.User != null
                                        ? group.Coach.User.FullName
                                        : "-")
                                </td>

                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
